(window.webpackJsonp=window.webpackJsonp||[]).push([[100],{430:function(a,s,t){"use strict";t.r(s);var e=t(0),r=Object(e.a)({},function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"docker-machine"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-machine","aria-hidden":"true"}},[a._v("#")]),a._v(" docker-machine")]),a._v(" "),t("p",[a._v("docker-machine 链接虚拟机 docker")]),a._v(" "),t("h2",{attrs:{id:"create"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#create","aria-hidden":"true"}},[a._v("#")]),a._v(" Create")]),a._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 创建名为`default`的 docker-machine")]),a._v("\ndocker"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("machine create "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("d virtualbox "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("default")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 设置环境变量")]),a._v("\neval "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("$")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("docker"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("machine env "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("default")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 启动docker-machine")]),a._v("\ndocker"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("machine start "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("default")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 查看`default`的ip")]),a._v("\ndocker"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("machine ip "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("default")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 启动nginx服务")]),a._v("\ndocker run "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("dp "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),a._v(" nginx\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// curl 查看 nginx启动情况")]),a._v("\ncurl "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("$")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("docker"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("machine ip defaucdlt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8000")]),a._v("\n")])])]),t("p",[a._v("然后到浏览器访问 "),t("code",[a._v("http://192.168.99.100:8000/")]),a._v(" 地址，则可以访问启动了的 nginx 服务")]),a._v(" "),t("h3",{attrs:{id:"command"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#command","aria-hidden":"true"}},[a._v("#")]),a._v(" Command")]),a._v(" "),t("p",[a._v("开启 docker-machine default (default是机器的名字)")]),a._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("docker"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("machine start "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("default")]),a._v("\n")])])]),t("p",[a._v("在 default 虚拟机里运行 busybox")]),a._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("$")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("docker"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("machine config "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("default")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" run busybox echo hello world\n")])])]),t("p",[a._v("重新启动")]),a._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("docker"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("machine restart\n")])])]),t("p",[a._v("停止")]),a._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("docker"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("machine stop "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("default")]),a._v("\n")])])]),t("p",[a._v("停止进程")]),a._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("docker"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("machine kill\n")])])]),t("p",[a._v("查看虚拟机的 IP")]),a._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("docker"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("machine ip "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("default")]),a._v("\n")])])]),t("p",[a._v("当前 shell 链接到虚拟机")]),a._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("eval "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("$")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("docker"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("machine env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),t("p",[a._v("查看环境变量")]),a._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("docker"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("machine env "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("default")]),a._v("\n")])])]),t("p",[a._v("查看机器的详细信息")]),a._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("docker"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("machine inspect "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("default")]),a._v("\n")])])]),t("p",[a._v("配置信息")]),a._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("docker"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("machine config\n")])])]),t("p",[a._v("条款信息")]),a._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("docker"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("machine provision\n")])])]),t("p",[a._v("进入虚拟机的 docker")]),a._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("docker"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("machine ssh\n")])])]),t("p",[a._v("查看虚拟机 docker 的状态")]),a._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("docker"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("machine status\n")])])]),t("p",[a._v("升级机器")]),a._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("docker"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("machine upgrade\n")])])]),t("p",[a._v("IP "),t("code",[a._v("http://192.168.99.100")])]),a._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("docker"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("machine ip\n")])])]),t("p",[a._v("URL tcp://192.168.99.100:2376")]),a._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("docker"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("machine url\n")])])]),t("p",[a._v("查看设置信息")]),a._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("docker"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("machine env "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("u\n")])])]),t("p",[a._v("设置 DOCKER 的变量")]),a._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("eval "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("$")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("docker"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("machine env "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("u"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),t("p",[a._v("查看 DOCKER 变量")]),a._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("env "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" grep "),t("span",{pre:!0,attrs:{class:"token constant"}},[a._v("DOCKER")]),a._v("\n")])])]),t("p",[a._v("设置开机启动名字为 default 的 docker 虚拟机")]),a._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("eval "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("$")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("docker"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("machine env "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("default")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])])])},[],!1,null,null,null);s.default=r.exports}}]);